const translations = {
  en: {
    title: "🧪 AWS Test – 10 Questions",
    button: "✅ Check Answers",
    feedback: [
      "🌟 Perfect! You're ready for certification!",
      "💪 Great job! Just a bit more practice!",
      "🔄 You're on the right track. Keep going!",
      "📚 Don't give up! Review the concepts and try again."
    ],
    questions: [
      {
        q: "What is Amazon VPC?",
        a: "b",
        options: ["Database service", "Virtual private network", "Storage service"]
      },
      {
        q: "What does Amazon DynamoDB do?",
        a: "c",
        options: ["Stores files", "Runs instances", "NoSQL database"]
      },
      {
        q: "What is CloudFormation?",
        a: "a",
        options: ["Infrastructure automation", "Monitoring", "Storage"]
      },
      {
        q: "What does AWS Trusted Advisor do?",
        a: "b",
        options: ["Controls access", "Provides recommendations", "Runs code"]
      },
      {
        q: "What is Amazon EBS?",
        a: "c",
        options: ["Network service", "Database service", "Persistent block storage"]
      },
      {
        q: "What does Amazon SQS do?",
        a: "a",
        options: ["Distributed messaging", "Object storage", "DNS routing"]
      },
      {
        q: "What is Amazon SNS?",
        a: "b",
        options: ["File storage", "Notification service", "CDN service"]
      },
      {
        q: "What does AWS Config do?",
        a: "c",
        options: ["Controls access", "Runs instances", "Monitors configurations"]
      },
      {
        q: "What is AWS CloudTrail?",
        a: "a",
        options: ["Activity auditing", "Data storage", "Routing"]
      },
      {
        q: "What does Amazon Redshift do?",
        a: "b",
        options: ["Object storage", "Data warehouse", "Messaging"]
      }
    ]
  },
  ro: {
    title: "🧪 Test AWS – 10 Intrebări",
    button: "✅ Verifică răspunsurile",
    feedback: [
      "🌟 Perfect! Ești gata de certificare!",
      "💪 Foarte bine! Mai exersează puțin!",
      "🔄 Ești pe drumul cel bun. Continuă!",
      "📚 Nu renunța! Reia conceptele și revino."
    ],
    questions: [
      {
        q: "Ce este Amazon VPC?",
        a: "b",
        options: ["Serviciu de baze de date", "Rețea virtuală privată", "Serviciu de stocare"],
      },
      {
        q: "Ce face Amazon DynamoDB?",
        a: "c",
        options: ["Stochează fișiere", "Rulează instanțe","Bază de date NoSQL"],
      },
      {
        q: "Ce este CloudFormation?",
        a: "a",
        options: ["Automatizare infrastructură", "Monitorizare", "Stocare"],
      },
      {
        q: "Ce face AWS Trusted Advisor?",
        a: "b",
        options: ["Controlează accesul", "Oferă recomandări", "Rulează cod"],
      },
      {
        q: "Ce este Amazon EBS?",
        a: "c",
        options: ["Serviciu de rețea", "Serviciu de baze de date", "Stocare bloc persistentă"]
      },
      {
        q: "Ce face Amazon SQS?",
        a: "a",
        options: ["Mesagerie distribuită", "Stocare obiecte", "Routing DNS"],
      },
      {
        q: "Ce este Amazon SNS?",
        a: "b",
        options: ["Stocare fișiere", "Serviciu notificări", "Serviciu CDN"],
      },
      {
        q: "Ce face AWS Config?",
        a: "c",
        options: ["Controlează accesul", "Rulează instanțe", "Monitorizează configurații"],
      },
      {
        q: "Ce este AWS CloudTrail?",
        a: "a",
        options: ["Audit activități", "Stocare date", "Routing"],
      },
      {
        q: "Ce face Amazon Redshift?",
        a: "b",
        options: ["Stocare obiecte", "Data warehouse", "Mesagerie"],
      },
    ]
  },
  es: {
    title: "🧪 Prueba AWS – 10 Preguntas",
    button: "✅ Verificar respuestas",
    feedback: [
      "🌟 ¡Perfecto! ¡Estás listo para la certificación!",
      "💪 ¡Muy bien! ¡Solo un poco más de práctica!",
      "🔄 Vas por buen camino. ¡Sigue así!",
      "📚 ¡No te rindas! Revisa los conceptos y vuelve a intentarlo."
    ],
    questions: [
      {
        q: "¿Qué es Amazon VPC?",
        a: "b",
        options: ["Servicio de base de datos", "Red privada virtual", "Servicio de almacenamiento"]
      },
      {
        q: "¿Qué hace Amazon DynamoDB?",
        a: "c",
        options: ["Almacena archivos", "Ejecuta instancias", "Base de datos NoSQL"]
      },
      {
        q: "¿Qué es CloudFormation?",
        a: "a",
        options: ["Automatización de infraestructura", "Monitoreo", "Almacenamiento"]
      },
      {
        q: "¿Qué hace AWS Trusted Advisor?",
        a: "b",
        options: ["Controla el acceso", "Ofrece recomendaciones", "Ejecuta código"]
      },
      {
        q: "¿Qué es Amazon EBS?",
        a: "c",
        options: ["Servicio de red", "Servicio de base de datos", "Almacenamiento de bloques persistente"]
      },
      {
        q: "¿Qué hace Amazon SQS?",
        a: "a",
        options: ["Mensajería distribuida", "Almacenamiento de objetos", "Enrutamiento DNS"]
      },
      {
        q: "¿Qué es Amazon SNS?",
        a: "b",
        options: ["Almacenamiento de archivos", "Servicio de notificaciones", "Servicio CDN"]
      },
      {
        q: "¿Qué hace AWS Config?",
        a: "c",
        options: ["Controla el acceso", "Ejecuta instancias", "Monitorea configuraciones"]
      },
      {
        q: "¿Qué es AWS CloudTrail?",
        a: "a",
        options: ["Auditoría de actividades", "Almacenamiento de datos", "Enrutamiento"]
      },
      {
        q: "¿Qué hace Amazon Redshift?",
        a: "b",
        options: ["Almacenamiento de objetos", "Data warehouse", "Mensajería"]
      }
    ]
  },
  fr: {
    title: "🧪 Test AWS – 10 Questions",
    button: "✅ Vérifier les réponses",
    feedback: [
      "🌟 Parfait ! Tu es prêt pour la certification !",
      "💪 Très bien ! Encore un peu de pratique !",
      "🔄 Tu es sur la bonne voie. Continue !",
      "📚 Ne lâche pas ! Revois les concepts et réessaie."
    ],
    questions: [      
      {
        q: "Qu'est-ce que Amazon VPC ?",
        a: "b",
        options: ["Service de base de données", "Réseau privé virtuel", "Service de stockage"]
      },
      {
        q: "Que fait Amazon DynamoDB ?",
        a: "c",
        options: ["Stocke des fichiers", "Exécute des instances", "Base de données NoSQL"]
      },
      {
        q: "Qu'est-ce que CloudFormation ?",
        a: "a",
        options: ["Automatisation de l'infrastructure", "Surveillance", "Stockage"]
      },
      {
        q: "Que fait AWS Trusted Advisor ?",
        a: "b",
        options: ["Contrôle l'accès", "Fournit des recommandations", "Exécute du code"]
      },
      {
        q: "Qu'est-ce que Amazon EBS ?",
        a: "c",
        options: ["Service réseau", "Service de base de données", "Stockage de blocs persistant"]
      },
      {
        q: "Que fait Amazon SQS ?",
        a: "a",
        options: ["Messagerie distribuée", "Stockage d'objets", "Routage DNS"]
      },
      {
        q: "Qu'est-ce que Amazon SNS ?",
        a: "b",
        options: ["Stockage de fichiers", "Service de notifications", "Service CDN"]
      },
      {
        q: "Que fait AWS Config ?",
        a: "c",
        options: ["Contrôle l'accès", "Exécute des instances", "Surveille les configurations"]
      },
      {
        q: "Qu'est-ce que AWS CloudTrail ?",
        a: "a",
        options: ["Audit des activités", "Stockage de données", "Routage"]
      },
      {
        q: "Que fait Amazon Redshift ?",
        a: "b",
        options: ["Stockage d'objets", "Entrepôt de données", "Messagerie"]
      }
      ]
  }
};


let currentLang = "en";

// Function to generate the quiz based on the selected language
function generateQuiz(lang) {
  currentLang = lang;
  const t = translations[lang] || translations.en;
  document.querySelector("h1").textContent = t.title;

  const form = document.getElementById("quiz-form");
  form.innerHTML = "";

  t.questions.forEach((item, index) => {
    const div = document.createElement("div");
    div.className = "question";
    div.innerHTML =
      `<p>${index + 1}. ${item.q}</p>` +
      item.options
        .map(
          (opt, i) =>
            `<label><input type="radio" name="q${index}" value="${String.fromCharCode(
              97 + i
            )}"> ${opt}</label><br>`
        )
        .join("");
    form.appendChild(div);
  });

  const submitBtn = document.createElement("button");
  submitBtn.type = "submit";
  submitBtn.textContent = t.button;
  form.appendChild(submitBtn);

  form.onsubmit = function (e) {
    e.preventDefault();
    let score = 0;
    t.questions.forEach((item, i) => {
      const selected = document.querySelector(`input[name="q${i}"]:checked`);
      if (selected && selected.value === item.a) score++;
    });

    let feedback = "";
    if (score === 20) feedback = t.feedback[0];
    else if (score >= 16) feedback = t.feedback[1];
    else if (score >= 10) feedback = t.feedback[2];
    else feedback = t.feedback[3];

    document.getElementById("result").textContent = `You scored ${score}/20. ${feedback}`;
  };
}

// Language selection functionality
document.getElementById("lang-select").addEventListener("change", (e) => {
  generateQuiz(e.target.value);
});

// Initial quiz generation
document.addEventListener("DOMContentLoaded", () => {
  generateQuiz(currentLang);
});

// Theme toggle functionality
document.getElementById("theme-toggle").addEventListener("click", () => {
  document.body.classList.toggle("dark");
});

// Export to PDF functionality
document.getElementById("export-pdf").addEventListener("click", () => {
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();

  doc.setFontSize(16);
  doc.text("AWS Quiz Results", 10, 20);

  let y = 30;
  const questions = translations[currentLang].questions;

  questions.forEach((item, i) => {
    const selected = document.querySelector(`input[name="q${i}"]:checked`);
    const answer = selected ? selected.value : "—";
    const correct = item.a === answer ? "✔️" : "❌";

    doc.setFontSize(12);
    doc.text(`${i + 1}. ${item.q}`, 10, y);
    y += 6;
    doc.text(`Your answer: ${answer} ${correct}`, 10, y);
    y += 10;

    if (y > 270) {
      doc.addPage();
      y = 20;
    }
  });

  doc.save(`aws_quiz_${currentLang}.pdf`);
});

//Timer functionality
let seconds = 0;

const timerDisplay = document.getElementById("timer");
const form = document.getElementById("quiz-form");
const resultBox = document.getElementById("result");
const timeLimit = 600; // 10 minutes in seconds

function updateTimer() {
  const mins = String(Math.floor(seconds / 60)).padStart(2, "0");
  const secs = String(seconds % 60).padStart(2, "0");
  timerDisplay.textContent = `⏱️ ${mins}:${secs}`;
  seconds++;

  if (seconds >= timeLimit) {
    clearInterval(timerInterval);

    form.querySelectorAll("input").forEach(input => input.disabled = true);
    if (submitBtn) submitBtn.disabled = true;

    resultBox.textContent = "⏳ Time's up! You didn't finish in time. Please try again.";
    resultBox.classList.add("timeout");
    resultBox.style.background = "linear-gradient(135deg, #ff6b6b, #c0392b)";
    resultBox.style.color = "#fff";

    return; // Stop the timer
  }
   seconds++;
}

let timerInterval = setInterval(updateTimer, 1000);