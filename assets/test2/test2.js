const translations = {
  en: {
    title: "üß™ AWS Test ‚Äì 10 Questions",
    button: "‚úÖ Check Answers",
    feedback: [
      "üåü Perfect! You're ready for certification!",
      "üí™ Great job! Just a bit more practice!",
      "üîÑ You're on the right track. Keep going!",
      "üìö Don't give up! Review the concepts and try again."
    ],
    questions: [
      {
        q: "What is Amazon VPC?",
        a: "b",
        options: ["Database service", "Virtual private network", "Storage service"]
      },
      {
        q: "What does Amazon DynamoDB do?",
        a: "c",
        options: ["Stores files", "Runs instances", "NoSQL database"]
      },
      {
        q: "What is CloudFormation?",
        a: "a",
        options: ["Infrastructure automation", "Monitoring", "Storage"]
      },
      {
        q: "What does AWS Trusted Advisor do?",
        a: "b",
        options: ["Controls access", "Provides recommendations", "Runs code"]
      },
      {
        q: "What is Amazon EBS?",
        a: "c",
        options: ["Network service", "Database service", "Persistent block storage"]
      },
      {
        q: "What does Amazon SQS do?",
        a: "a",
        options: ["Distributed messaging", "Object storage", "DNS routing"]
      },
      {
        q: "What is Amazon SNS?",
        a: "b",
        options: ["File storage", "Notification service", "CDN service"]
      },
      {
        q: "What does AWS Config do?",
        a: "c",
        options: ["Controls access", "Runs instances", "Monitors configurations"]
      },
      {
        q: "What is AWS CloudTrail?",
        a: "a",
        options: ["Activity auditing", "Data storage", "Routing"]
      },
      {
        q: "What does Amazon Redshift do?",
        a: "b",
        options: ["Object storage", "Data warehouse", "Messaging"]
      }
    ]
  },
  ro: {
    title: "üß™ Test AWS ‚Äì 10 IntrebƒÉri",
    button: "‚úÖ VerificƒÉ rƒÉspunsurile",
    feedback: [
      "üåü Perfect! E»ôti gata de certificare!",
      "üí™ Foarte bine! Mai exerseazƒÉ pu»õin!",
      "üîÑ E»ôti pe drumul cel bun. ContinuƒÉ!",
      "üìö Nu renun»õa! Reia conceptele »ôi revino."
    ],
    questions: [
      {
        q: "Ce este Amazon VPC?",
        a: "b",
        options: ["Serviciu de baze de date", "Re»õea virtualƒÉ privatƒÉ", "Serviciu de stocare"],
      },
      {
        q: "Ce face Amazon DynamoDB?",
        a: "c",
        options: ["StocheazƒÉ fi»ôiere", "RuleazƒÉ instan»õe","BazƒÉ de date NoSQL"],
      },
      {
        q: "Ce este CloudFormation?",
        a: "a",
        options: ["Automatizare infrastructurƒÉ", "Monitorizare", "Stocare"],
      },
      {
        q: "Ce face AWS Trusted Advisor?",
        a: "b",
        options: ["ControleazƒÉ accesul", "OferƒÉ recomandƒÉri", "RuleazƒÉ cod"],
      },
      {
        q: "Ce este Amazon EBS?",
        a: "c",
        options: ["Serviciu de re»õea", "Serviciu de baze de date", "Stocare bloc persistentƒÉ"]
      },
      {
        q: "Ce face Amazon SQS?",
        a: "a",
        options: ["Mesagerie distribuitƒÉ", "Stocare obiecte", "Routing DNS"],
      },
      {
        q: "Ce este Amazon SNS?",
        a: "b",
        options: ["Stocare fi»ôiere", "Serviciu notificƒÉri", "Serviciu CDN"],
      },
      {
        q: "Ce face AWS Config?",
        a: "c",
        options: ["ControleazƒÉ accesul", "RuleazƒÉ instan»õe", "MonitorizeazƒÉ configura»õii"],
      },
      {
        q: "Ce este AWS CloudTrail?",
        a: "a",
        options: ["Audit activitƒÉ»õi", "Stocare date", "Routing"],
      },
      {
        q: "Ce face Amazon Redshift?",
        a: "b",
        options: ["Stocare obiecte", "Data warehouse", "Mesagerie"],
      },
    ]
  },
  es: {
    title: "üß™ Prueba AWS ‚Äì 10 Preguntas",
    button: "‚úÖ Verificar respuestas",
    feedback: [
      "üåü ¬°Perfecto! ¬°Est√°s listo para la certificaci√≥n!",
      "üí™ ¬°Muy bien! ¬°Solo un poco m√°s de pr√°ctica!",
      "üîÑ Vas por buen camino. ¬°Sigue as√≠!",
      "üìö ¬°No te rindas! Revisa los conceptos y vuelve a intentarlo."
    ],
    questions: [
      {
        q: "¬øQu√© es Amazon VPC?",
        a: "b",
        options: ["Servicio de base de datos", "Red privada virtual", "Servicio de almacenamiento"]
      },
      {
        q: "¬øQu√© hace Amazon DynamoDB?",
        a: "c",
        options: ["Almacena archivos", "Ejecuta instancias", "Base de datos NoSQL"]
      },
      {
        q: "¬øQu√© es CloudFormation?",
        a: "a",
        options: ["Automatizaci√≥n de infraestructura", "Monitoreo", "Almacenamiento"]
      },
      {
        q: "¬øQu√© hace AWS Trusted Advisor?",
        a: "b",
        options: ["Controla el acceso", "Ofrece recomendaciones", "Ejecuta c√≥digo"]
      },
      {
        q: "¬øQu√© es Amazon EBS?",
        a: "c",
        options: ["Servicio de red", "Servicio de base de datos", "Almacenamiento de bloques persistente"]
      },
      {
        q: "¬øQu√© hace Amazon SQS?",
        a: "a",
        options: ["Mensajer√≠a distribuida", "Almacenamiento de objetos", "Enrutamiento DNS"]
      },
      {
        q: "¬øQu√© es Amazon SNS?",
        a: "b",
        options: ["Almacenamiento de archivos", "Servicio de notificaciones", "Servicio CDN"]
      },
      {
        q: "¬øQu√© hace AWS Config?",
        a: "c",
        options: ["Controla el acceso", "Ejecuta instancias", "Monitorea configuraciones"]
      },
      {
        q: "¬øQu√© es AWS CloudTrail?",
        a: "a",
        options: ["Auditor√≠a de actividades", "Almacenamiento de datos", "Enrutamiento"]
      },
      {
        q: "¬øQu√© hace Amazon Redshift?",
        a: "b",
        options: ["Almacenamiento de objetos", "Data warehouse", "Mensajer√≠a"]
      }
    ]
  },
  fr: {
    title: "üß™ Test AWS ‚Äì 10 Questions",
    button: "‚úÖ V√©rifier les r√©ponses",
    feedback: [
      "üåü Parfait ! Tu es pr√™t pour la certification !",
      "üí™ Tr√®s bien ! Encore un peu de pratique !",
      "üîÑ Tu es sur la bonne voie. Continue !",
      "üìö Ne l√¢che pas ! Revois les concepts et r√©essaie."
    ],
    questions: [      
      {
        q: "Qu'est-ce que Amazon VPC ?",
        a: "b",
        options: ["Service de base de donn√©es", "R√©seau priv√© virtuel", "Service de stockage"]
      },
      {
        q: "Que fait Amazon DynamoDB ?",
        a: "c",
        options: ["Stocke des fichiers", "Ex√©cute des instances", "Base de donn√©es NoSQL"]
      },
      {
        q: "Qu'est-ce que CloudFormation ?",
        a: "a",
        options: ["Automatisation de l'infrastructure", "Surveillance", "Stockage"]
      },
      {
        q: "Que fait AWS Trusted Advisor ?",
        a: "b",
        options: ["Contr√¥le l'acc√®s", "Fournit des recommandations", "Ex√©cute du code"]
      },
      {
        q: "Qu'est-ce que Amazon EBS ?",
        a: "c",
        options: ["Service r√©seau", "Service de base de donn√©es", "Stockage de blocs persistant"]
      },
      {
        q: "Que fait Amazon SQS ?",
        a: "a",
        options: ["Messagerie distribu√©e", "Stockage d'objets", "Routage DNS"]
      },
      {
        q: "Qu'est-ce que Amazon SNS ?",
        a: "b",
        options: ["Stockage de fichiers", "Service de notifications", "Service CDN"]
      },
      {
        q: "Que fait AWS Config ?",
        a: "c",
        options: ["Contr√¥le l'acc√®s", "Ex√©cute des instances", "Surveille les configurations"]
      },
      {
        q: "Qu'est-ce que AWS CloudTrail ?",
        a: "a",
        options: ["Audit des activit√©s", "Stockage de donn√©es", "Routage"]
      },
      {
        q: "Que fait Amazon Redshift ?",
        a: "b",
        options: ["Stockage d'objets", "Entrep√¥t de donn√©es", "Messagerie"]
      }
      ]
  }
};


let currentLang = "en";

// Function to generate the quiz based on the selected language
function generateQuiz(lang) {
  currentLang = lang;
  const t = translations[lang] || translations.en;
  document.querySelector("h1").textContent = t.title;

  const form = document.getElementById("quiz-form");
  form.innerHTML = "";

  t.questions.forEach((item, index) => {
    const div = document.createElement("div");
    div.className = "question";
    div.innerHTML =
      `<p>${index + 1}. ${item.q}</p>` +
      item.options
        .map(
          (opt, i) =>
            `<label><input type="radio" name="q${index}" value="${String.fromCharCode(
              97 + i
            )}"> ${opt}</label><br>`
        )
        .join("");
    form.appendChild(div);
  });

  const submitBtn = document.createElement("button");
  submitBtn.type = "submit";
  submitBtn.textContent = t.button;
  form.appendChild(submitBtn);

  form.onsubmit = function (e) {
    e.preventDefault();
    let score = 0;
    t.questions.forEach((item, i) => {
      const selected = document.querySelector(`input[name="q${i}"]:checked`);
      if (selected && selected.value === item.a) score++;
    });

    let feedback = "";
    if (score === 20) feedback = t.feedback[0];
    else if (score >= 16) feedback = t.feedback[1];
    else if (score >= 10) feedback = t.feedback[2];
    else feedback = t.feedback[3];

    document.getElementById("result").textContent = `You scored ${score}/20. ${feedback}`;
  };
}

// Language selection functionality
document.getElementById("lang-select").addEventListener("change", (e) => {
  generateQuiz(e.target.value);
});

// Initial quiz generation
document.addEventListener("DOMContentLoaded", () => {
  generateQuiz(currentLang);
});

// Theme toggle functionality
document.getElementById("theme-toggle").addEventListener("click", () => {
  document.body.classList.toggle("dark");
});

// Export to PDF functionality
document.getElementById("export-pdf").addEventListener("click", () => {
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();

  doc.setFontSize(16);
  doc.text("AWS Quiz Results", 10, 20);

  let y = 30;
  const questions = translations[currentLang].questions;

  questions.forEach((item, i) => {
    const selected = document.querySelector(`input[name="q${i}"]:checked`);
    const answer = selected ? selected.value : "‚Äî";
    const correct = item.a === answer ? "‚úîÔ∏è" : "‚ùå";

    doc.setFontSize(12);
    doc.text(`${i + 1}. ${item.q}`, 10, y);
    y += 6;
    doc.text(`Your answer: ${answer} ${correct}`, 10, y);
    y += 10;

    if (y > 270) {
      doc.addPage();
      y = 20;
    }
  });

  doc.save(`aws_quiz_${currentLang}.pdf`);
});

//Timer functionality
let seconds = 0;

const timerDisplay = document.getElementById("timer");
const form = document.getElementById("quiz-form");
const resultBox = document.getElementById("result");
const timeLimit = 600; // 10 minutes in seconds

function updateTimer() {
  const mins = String(Math.floor(seconds / 60)).padStart(2, "0");
  const secs = String(seconds % 60).padStart(2, "0");
  timerDisplay.textContent = `‚è±Ô∏è ${mins}:${secs}`;
  seconds++;

  if (seconds >= timeLimit) {
    clearInterval(timerInterval);

    form.querySelectorAll("input").forEach(input => input.disabled = true);
    if (submitBtn) submitBtn.disabled = true;

    resultBox.textContent = "‚è≥ Time's up! You didn't finish in time. Please try again.";
    resultBox.classList.add("timeout");
    resultBox.style.background = "linear-gradient(135deg, #ff6b6b, #c0392b)";
    resultBox.style.color = "#fff";

    return; // Stop the timer
  }
   seconds++;
}

let timerInterval = setInterval(updateTimer, 1000);