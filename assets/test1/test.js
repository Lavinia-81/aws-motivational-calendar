const translations = {
  en: {
    title: "üß™ AWS Test ‚Äì 10 Questions",
    button: "‚úÖ Check Answers",
    feedback: [
      "üåü Perfect! You're ready for certification!",
      "üí™ Great job! Just a bit more practice!",
      "üîÑ You're on the right track. Keep going!",
      "üìö Don't give up! Review the concepts and try again."
    ],
    questions: [
      {
        q: "What does Amazon S3 do?",
        a: "a",
        options: ["Stores objects", "Runs EC2 instances", "Manages databases"]
      },
      {
        q: "What is IAM?",
        a: "b",
        options: ["Storage service", "Access control", "Network service"]
      },
      {
        q: "Which EC2 instance type is optimal for intensive processing?",
        a: "c",
        options: ["T2.micro", "M5.large", "C5.xlarge"]
      },
      {
        q: "Which AWS service provides relational databases?",
        a: "a",
        options: ["Amazon RDS", "Amazon DynamoDB", "Amazon S3"]
      },
      {
        q: "What does CloudWatch do?",
        a: "b",
        options: ["Stores logs", "Monitors resources", "Controls access"]
      },
      {
        q: "What is AWS Lambda?",
        a: "c",
        options: ["Storage service", "Network service", "Serverless code execution"]
      },
      {
        q: "Which service provides CDN?",
        a: "a",
        options: ["Amazon CloudFront", "Amazon Route 53", "Amazon S3"]
      },
      {
        q: "What does Route 53 do?",
        a: "b",
        options: ["Stores files", "DNS and routing", "Monitoring"]
      },
      {
        q: "What is Auto Scaling?",
        a: "c",
        options: ["Automatic storage", "Automatic backup", "Automatic instance scaling"]
      },
      {
        q: "What does Elastic Load Balancer do?",
        a: "a",
        options: ["Distributes traffic", "Stores data", "Controls access"]
      },
    ]
  },
  ro: {
    title: "üß™ Test AWS ‚Äì 10 IntrebƒÉri",
    button: "‚úÖ VerificƒÉ rƒÉspunsurile",
    feedback: [
      "üåü Perfect! E»ôti gata de certificare!",
      "üí™ Foarte bine! Mai exerseazƒÉ pu»õin!",
      "üîÑ E»ôti pe drumul cel bun. ContinuƒÉ!",
      "üìö Nu renun»õa! Reia conceptele »ôi revino."
    ],
    questions: [
      {
        q: "Ce face Amazon S3?",
        a: "a",
        options: ["StocheazƒÉ obiecte", "RuleazƒÉ instan»õe EC2", "GestioneazƒÉ baze de date"]
      },
      {
        q: "Ce este IAM?",
        a: "b",
        options: [ "Serviciu de stocare", "Control acces", "Serviciu de re»õea"]
      },
      {
        q: "Ce tip de instan»õƒÉ EC2 e optimƒÉ pentru procesare intensivƒÉ?",
        a: "c",
        options: ["T2.micro", "M5.large", "C5.xlarge"],
      },
      {
        q: "Ce serviciu AWS oferƒÉ baze de date rela»õionale?",
        a: "a",
        options: ["Amazon RDS", "Amazon DynamoDB", "Amazon S3"],
      },
      {
        q: "Ce face CloudWatch?",
        a: "b",
        options: ["StocheazƒÉ loguri", "MonitorizeazƒÉ resurse", "ControleazƒÉ accesul"]
      },
      {
        q: "Ce este AWS Lambda?",
        a: "c",
        options: ["Serviciu de stocare", "Serviciu de re»õea", "Execu»õie cod fƒÉrƒÉ server"]
      },
      {
        q: "Ce serviciu oferƒÉ CDN?",
        a: "a",
        options: ["Amazon CloudFront", "Amazon Route 53", "Amazon S3"],
      },
      {
        q: "Ce face Route 53?",
        a: "b",
        options: ["StocheazƒÉ fi»ôiere", "DNS »ôi routing", "Monitorizare"],
      },
      {
        q: "Ce este Auto Scaling?",
        a: "c",
        options: ["Stocare automatƒÉ", "Backup automat", "Scalare automatƒÉ a instan»õelor"],
      },
      {
        q: "Ce face Elastic Load Balancer?",
        a: "a",
        options: ["Distribuie traficul", "StocheazƒÉ date", "ControleazƒÉ accesul"],
      },
    ]
  },
  es: {
    title: "üß™ Prueba AWS ‚Äì 10 Preguntas",
    button: "‚úÖ Verificar respuestas",
    feedback: [
      "üåü ¬°Perfecto! ¬°Est√°s listo para la certificaci√≥n!",
      "üí™ ¬°Muy bien! ¬°Solo un poco m√°s de pr√°ctica!",
      "üîÑ Vas por buen camino. ¬°Sigue as√≠!",
      "üìö ¬°No te rindas! Revisa los conceptos y vuelve a intentarlo."
    ],
    questions: [
      {
        q: "¬øQu√© hace Amazon S3?",
        a: "a",
        options: ["Almacena objetos", "Ejecuta instancias EC2", "Gestiona bases de datos"]
      },
      {
        q: "¬øQu√© es IAM?",
        a: "b",
        options: ["Servicio de almacenamiento", "Control de acceso", "Servicio de red"]
      },
      {
        q: "¬øQu√© tipo de instancia EC2 es √≥ptima para procesamiento intensivo?",
        a: "c",
        options: ["T2.micro", "M5.large", "C5.xlarge"]
      },
      {
        q: "¬øQu√© servicio de AWS ofrece bases de datos relacionales?",
        a: "a",
        options: ["Amazon RDS", "Amazon DynamoDB", "Amazon S3"]
      },
      {
        q: "¬øQu√© hace CloudWatch?",
        a: "b",
        options: ["Almacena registros", "Monitorea recursos", "Controla el acceso"]
      },
      {
        q: "¬øQu√© es AWS Lambda?",
        a: "c",
        options: ["Servicio de almacenamiento", "Servicio de red", "Ejecuci√≥n de c√≥digo sin servidor"]
      },
      {
        q: "¬øQu√© servicio ofrece CDN?",
        a: "a",
        options: ["Amazon CloudFront", "Amazon Route 53", "Amazon S3"]
      },
      {
        q: "¬øQu√© hace Route 53?",
        a: "b",
        options: ["Almacena archivos", "DNS y enrutamiento", "Monitoreo"]
      },
      {
        q: "¬øQu√© es Auto Scaling?",
        a: "c",
        options: ["Almacenamiento autom√°tico", "Copia de seguridad autom√°tica", "Escalado autom√°tico de instancias"]
      },
      {
        q: "¬øQu√© hace Elastic Load Balancer?",
        a: "a",
        options: ["Distribuye el tr√°fico", "Almacena datos", "Controla el acceso"]
      },     
    ]
  },
  fr: {
    title: "üß™ Test AWS ‚Äì 10 Questions",
    button: "‚úÖ V√©rifier les r√©ponses",
    feedback: [
      "üåü Parfait ! Tu es pr√™t pour la certification !",
      "üí™ Tr√®s bien ! Encore un peu de pratique !",
      "üîÑ Tu es sur la bonne voie. Continue !",
      "üìö Ne l√¢che pas ! Revois les concepts et r√©essaie."
    ],
    questions: [
      {
        q: "Que fait Amazon S3 ?",
        a: "a",
        options: ["Stocke des objets", "Ex√©cute des instances EC2", "G√®re des bases de donn√©es"]
      },
      {
        q: "Qu'est-ce que IAM ?",
        a: "b",
        options: ["Service de stockage", "Contr√¥le d'acc√®s", "Service r√©seau"]
      },
      {
        q: "Quel type d'instance EC2 est optimal pour le traitement intensif ?",
        a: "c",
        options: ["T2.micro", "M5.large", "C5.xlarge"]
      },
      {
        q: "Quel service AWS fournit des bases de donn√©es relationnelles ?",
        a: "a",
        options: ["Amazon RDS", "Amazon DynamoDB", "Amazon S3"]
      },
      {
        q: "Que fait CloudWatch ?",
        a: "b",
        options: ["Stocke des journaux", "Surveille les ressources", "Contr√¥le l'acc√®s"]
      },
      {
        q: "Qu'est-ce que AWS Lambda ?",
        a: "c",
        options: ["Service de stockage", "Service r√©seau", "Ex√©cution de code sans serveur"]
      },
      {
        q: "Quel service fournit un CDN ?",
        a: "a",
        options: ["Amazon CloudFront", "Amazon Route 53", "Amazon S3"]
      },
      {
        q: "Que fait Route 53 ?",
        a: "b",
        options: ["Stocke des fichiers", "DNS et routage", "Surveillance"]
      },
      {
        q: "Qu'est-ce que Auto Scaling ?",
        a: "c",
        options: ["Stockage automatique", "Sauvegarde automatique", "Mise √† l'√©chelle automatique des instances"]
      },
      {
        q: "Que fait Elastic Load Balancer ?",
        a: "a",
        options: ["Distribue le trafic", "Stocke des donn√©es", "Contr√¥le l'acc√®s"]
      },
      ]
  }
};

let currentLang = "en";


// Function to generate the quiz based on the selected language
function generateQuiz(lang) {
  currentLang = lang;
  const t = translations[lang] || translations.en;
  document.querySelector("h1").textContent = t.title;

  const form = document.getElementById("quiz-form");
  form.innerHTML = "";

  t.questions.forEach((item, index) => {
    const div = document.createElement("div");
    div.className = "question";
    div.innerHTML =
      `<p>${index + 1}. ${item.q}</p>` +
      item.options
        .map(
          (opt, i) =>
            `<label><input type="radio" name="q${index}" value="${String.fromCharCode(
              97 + i
            )}"> ${opt}</label><br>`
        )
        .join("");
    form.appendChild(div);
  });

  const submitBtn = document.createElement("button");
  submitBtn.type = "submit";
  submitBtn.textContent = t.button;
  form.appendChild(submitBtn);

  form.onsubmit = function (e) {
    e.preventDefault();
    let score = 0;
    t.questions.forEach((item, i) => {
      const selected = document.querySelector(`input[name="q${i}"]:checked`);
      if (selected && selected.value === item.a) score++;
    });

    let feedback = "";
    if (score === 20) feedback = t.feedback[0];
    else if (score >= 16) feedback = t.feedback[1];
    else if (score >= 10) feedback = t.feedback[2];
    else feedback = t.feedback[3];

    document.getElementById("result").textContent = `You scored ${score}/20. ${feedback}`;
  };
}

// Language selection functionality
document.getElementById("lang-select").addEventListener("change", (e) => {
  generateQuiz(e.target.value);
});

// Initial quiz generation
document.addEventListener("DOMContentLoaded", () => {
  generateQuiz(currentLang);
});

// Theme toggle functionality
document.getElementById("theme-toggle").addEventListener("click", () => {
  document.body.classList.toggle("dark");
});

// Export to PDF functionality
document.getElementById("export-pdf").addEventListener("click", () => {
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();

  doc.setFontSize(16);
  doc.text("AWS Quiz Results", 10, 20);

  let y = 30;
  const questions = translations[currentLang].questions;

  questions.forEach((item, i) => {
    const selected = document.querySelector(`input[name="q${i}"]:checked`);
    const answer = selected ? selected.value : "‚Äî";
    const correct = item.a === answer ? "‚úîÔ∏è" : "‚ùå";

    doc.setFontSize(12);
    doc.text(`${i + 1}. ${item.q}`, 10, y);
    y += 6;
    doc.text(`Your answer: ${answer} ${correct}`, 10, y);
    y += 10;

    if (y > 270) {
      doc.addPage();
      y = 20;
    }
  });

  doc.save(`aws_quiz_${currentLang}.pdf`);
});

//Timer functionality
let seconds = 0;

const timerDisplay = document.getElementById("timer");
const form = document.getElementById("quiz-form");
const resultBox = document.getElementById("result");
const timeLimit = 600; // 10 minutes in seconds

function updateTimer() {
  const mins = String(Math.floor(seconds / 60)).padStart(2, "0");
  const secs = String(seconds % 60).padStart(2, "0");
  timerDisplay.textContent = `‚è±Ô∏è ${mins}:${secs}`;
  seconds++;

  if (seconds >= timeLimit) {
    clearInterval(timerInterval);

    form.querySelectorAll("input").forEach(input => input.disabled = true);
    if (submitBtn) submitBtn.disabled = true;

    resultBox.textContent = "‚è≥ Time's up! You didn't finish in time. Please try again.";
    resultBox.classList.add("timeout");
    resultBox.style.background = "linear-gradient(135deg, #ff6b6b, #c0392b)";
    resultBox.style.color = "#fff";

    return; // Stop the timer
  }
   seconds++;
}

let timerInterval = setInterval(updateTimer, 1000);